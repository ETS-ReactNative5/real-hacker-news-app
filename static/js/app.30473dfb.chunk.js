(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{408:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n(7),a=n.n(r),o=n(0),l=n.n(o),c=n(23),u=n(698),i=n(48),s=n(63),m=n(16),f=n.n(m),d=n(208),h=n.n(d),E="https://hacker-news.firebaseio.com/v0",y=E+"/item/",g=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(h.a.get(""+y+e+".json").then((function(e){return e.data})));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),null,null,null,Promise)},p=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(h.a.get("https://hacker-news.firebaseio.com/v0/newstories.json").then((function(e){return e.data})));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),null,null,null,Promise)},v=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3))>1?n+" months":(n=Math.floor(t/86400))>1?n+" days":(n=Math.floor(t/3600))>1?n+" hours":(n=Math.floor(t/60))>1?n+" minutes":"about minute"},b=n(149),k=Object(o.memo)((function(e){var t=Object(o.useState)({}),n=a()(t,2),r=n[0],u=n[1],i=l.a.useState(!1),m=a()(i,2),f=m[0],d=m[1],h=l.a.useCallback((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&u(e)})).then((function(){return d(!1)}))}),[]);Object(o.useEffect)((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&u(e)})).then((function(){return d(!1)}));var t=setInterval((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&u(e)})).then((function(){return d(!1)}))}),45e3);return function(){return clearInterval(t)}}),[]);var E=new Date(1e3*r.time).toDateString();return r&&r.url?l.a.createElement(c.Card,{refreshControl:l.a.createElement(s.a,{refreshing:f,onRefresh:h})},l.a.createElement(c.CardItem,{header:!0},l.a.createElement(c.Left,null,l.a.createElement(c.Icon,{name:"newspaper-outline"}),l.a.createElement(c.Body,null,l.a.createElement(c.Text,{style:{fontWeight:"bold"}},r.title),l.a.createElement(c.Text,{note:!0},"By: ",r.by),l.a.createElement(c.Text,{note:!0},"Rating: ",r.score),l.a.createElement(c.Text,{note:!0},E)))),l.a.createElement(c.CardItem,{style:{justifyContent:"flex-end"}},l.a.createElement(c.Button,{style:{alignSelf:"flex-end"},info:!0,onPress:function(){return b.a.openURL(r.url)}},l.a.createElement(c.Text,null,"Open link"))),l.a.createElement(c.CardItem,{footer:!0,bordered:!0,style:{justifyContent:"space-between"}},r.kids?l.a.createElement(c.Text,{style:{color:"blue"},onPress:function(){e.navigation.navigate("Comments",{story:r})}},"Show comments(",r.kids.length,")"):l.a.createElement(c.Text,{style:{color:"grey"}},"No comments yet"),l.a.createElement(c.Text,null,v(r.time)," ago"))):null}));function C(e){var t=e.navigation,n=Object(o.useState)(20),r=a()(n,2),u=r[0],m=r[1],f=Object(o.useState)([]),d=a()(f,2),h=d[0],E=d[1],y=l.a.useState(!1),g=a()(y,2),v=g[0],b=g[1],C=l.a.useCallback((function(){b(!0),p().then((function(e){E(e)})).then((function(){return b(!1)}))}),[]);return Object(o.useEffect)((function(){b(!0),p().then((function(e){E(e)})).then((function(){return b(!1)}));var e=setInterval((function(){b(!0),p().then((function(e){E(e)})).then((function(){return b(!1)}))}),6e4);return function(){return clearInterval(e)}}),[]),l.a.createElement(c.Content,{onScroll:function(e){(function(e){var t=e.layoutMeasurement,n=e.contentOffset,r=e.contentSize;return t.height+n.y+100>=r.height-20})(e.nativeEvent)&&(u<500?(b(!0),m(u+20),setInterval((function(){b(!1)}),1500)):m(500))},scrollEventThrottle:400,refreshControl:l.a.createElement(s.a,{refreshing:v,onRefresh:C})},h.slice(0,u).map((function(e){return l.a.createElement(i.a,{key:e,onPress:function(){}},l.a.createElement(k,{key:e,storyId:e,navigation:t}))})))}var I=n(13),S=n.n(I),x=n(71),j=n(397),w=n.n(j),T=Object(o.memo)((function e(t){var n=l.a.useState(!0),r=a()(n,2),u=r[0],i=r[1],s=Object(o.useState)({}),m=a()(s,2),f=m[0],d=m[1],h=l.a.useState(!1),E=a()(h,2),y=E[0],p=E[1];Object(o.useEffect)((function(){p(!0),g(t.commentId).then((function(e){return d(e)})).then((function(){return p(!1)}));var e=setInterval((function(){p(!0),g(t.commentId).then((function(e){return d(e)})).then((function(){return p(!1)}))}),3e4);return function(){return clearInterval(e)}}),[]);var b=new Date(1e3*f.time).toDateString();return f&&f.text?l.a.createElement(x.a.Section,{style:{borderBottomColor:"#E8E8E8",borderBottomWidth:2,backgroundColor:"#F5F5F5"}},l.a.createElement(x.a.Accordion,{expanded:u,onPress:function(){return i(!u)},style:{backgroundColor:"#E8E8E8"},title:l.a.createElement(c.Text,null,"Comment by: ",f.by),description:b+(y?" refreshing...":""),left:function(e){return l.a.createElement(x.a.Icon,S()({},e,{icon:"chat-processing-outline"}))}},l.a.createElement(x.a.Item,{left:function(){return l.a.createElement(w.a,{source:{html:f.text}})}}),l.a.createElement(x.a.Item,{left:function(){return l.a.createElement(c.Text,null," ",f.kids?l.a.createElement(c.Text,{style:{color:"blue"}},"Replies(",f.kids.length,")"):l.a.createElement(c.Text,{style:{color:"grey"}},"No replies yet"))},right:function(){return l.a.createElement(c.Text,null,v(f.time)," ago")}}),f.kids&&l.a.createElement(x.a.Item,{left:function(e){return l.a.createElement(x.a.Icon,S()({},e,{style:{margin:0,padding:0},icon:"share-all-outline"}))},style:{margin:0,padding:0,justifyContent:"center",alignContent:"center"},titleStyle:{margin:0,padding:0,height:0},description:function(){return l.a.createElement(x.a.Accordion,{style:{margin:-6,padding:0},title:"toggle replies",titleStyle:{margin:0,padding:0},descriptionStyle:{margin:0,padding:0,backgroundColor:"purple"}},f.kids&&f.kids.map((function(t){return l.a.createElement(e,{key:t,commentId:t})})))}}))):null}));function O(e){var t=e.route,n=e.navigation,r=t.params,u=Object(o.useState)(5),i=a()(u,2),m=i[0],f=i[1],d=Object(o.useState)({}),h=a()(d,2),E=h[0],y=h[1],p=l.a.useState(!1),v=a()(p,2),b=v[0],k=v[1],C=l.a.useCallback((function(){k(!0),g(r.story.id).then((function(e){return e.kids&&y(e.kids)})).then((function(){return k(!1)}))}),[]);Object(o.useEffect)((function(){y(r.story.kids),k(!0),g(r.story.id).then((function(e){return e.kids&&y(e.kids)})).then((function(){return k(!1)}));var e=setInterval((function(){k(!0),g(r.story.id).then((function(e){return e.kids&&y(e.kids)})).then((function(){return k(!1)}))}),45e3);return function(){return clearInterval(e)}}),[]);var I=new Date(1e3*r.story.time).toDateString();return l.a.createElement(c.Container,null,l.a.createElement(c.Content,{onScroll:function(e){(function(e){var t=e.layoutMeasurement,n=e.contentOffset,r=e.contentSize;return t.height+n.y+100>=r.height-20})(e.nativeEvent)&&(m<r.story.kids.length?f(m+5):f(r.story.kids.length))},scrollEventThrottle:400,refreshControl:l.a.createElement(s.a,{refreshing:b,onRefresh:C})},l.a.createElement(c.Card,null,l.a.createElement(c.CardItem,null,l.a.createElement(c.Left,null,l.a.createElement(c.Icon,{name:"newspaper-outline"}),l.a.createElement(c.Body,null,l.a.createElement(c.Text,{style:{fontWeight:"bold"}},r.story.title),l.a.createElement(c.Text,{note:!0},I)))),l.a.createElement(c.CardItem,{bordered:!0,style:{justifyContent:"center",alignItems:"center"}}),l.a.createElement(c.CardItem,{footer:!0,bordered:!0,style:{justifyContent:"space-between"}},l.a.createElement(c.Text,{style:{color:"grey"}},"Total comments: ",r.story.kids.length),l.a.createElement(c.Button,{info:!0,onPress:function(){n.pop()}},l.a.createElement(c.Text,null,"Back to news page")))),E&&E.length>0&&E.slice(0,m).map((function(e){return l.a.createElement(T,{key:e,commentId:e})}))))}var B=n(360),R=n(699),M=Object(R.a)();function D(){var e=Object(u.a)({Helvetica:n(357),Roboto:n(357),Roboto_medium:n(686)});return a()(e,1)[0]?l.a.createElement(B.a,null,l.a.createElement(c.Container,null,l.a.createElement(c.Header,{style:{backgroundColor:"#003133"}},l.a.createElement(c.Body,null,l.a.createElement(c.Title,{style:{alignSelf:"center",margin:10,color:"white"}},"Real hacker news"))),l.a.createElement(M.Navigator,null,l.a.createElement(M.Screen,{name:"Stories",component:C}),l.a.createElement(M.Screen,{name:"Comments",component:O})))):null}},457:function(e,t,n){e.exports=n(691)}},[[457,1,2]]]);
//# sourceMappingURL=app.30473dfb.chunk.js.map