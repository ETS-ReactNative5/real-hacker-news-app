(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{433:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var a=n(16),r=n.n(a),o=n(0),l=n.n(o),c=n(21),i=n(726),s=n(54),u=n(76),m=n(20),f=n.n(m),d=n(145),h=n.n(d),p="https://hacker-news.firebaseio.com/v0",y=p+"/newstories.json",E=p+"/item/",g=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(h.a.get(""+E+e+".json").then((function(e){return e.data})));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),null,null,null,Promise)},b=function(e){var t,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="n"===e?y:"b"===e?"https://hacker-news.firebaseio.com/v0/beststories.json":"t"===e?"https://hacker-news.firebaseio.com/v0/topstories.json":y,a.next=3,f.a.awrap(h.a.get(t).then((function(e){return e.data})));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}}),null,null,null,Promise)},v=function(e){var t=Math.floor((new Date-1e3*e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3))>1?n+" months":(n=Math.floor(t/86400))>1?n+" days":(n=Math.floor(t/3600))>1?n+" hours":(n=Math.floor(t/60))>1?n+" minutes":"About minute"},x=n(112),k=Object(o.memo)((function(e){var t=Object(o.useState)({}),n=r()(t,2),a=n[0],i=n[1],s=l.a.useState(!1),m=r()(s,2),f=m[0],d=m[1],h=l.a.useCallback((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&i(e)})).then((function(){return d(!1)}))}),[]);Object(o.useEffect)((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&i(e)})).then((function(){return d(!1)}));var t=setInterval((function(){d(!0),g(e.storyId).then((function(e){return e&&e.url&&i(e)})).then((function(){return d(!1)}))}),45e3);return function(){return clearInterval(t)}}),[]);var p=new Date(1e3*a.time).toDateString();return a&&a.url?l.a.createElement(c.Card,{refreshControl:l.a.createElement(u.a,{refreshing:f,onRefresh:h})},l.a.createElement(c.CardItem,{header:!0,style:{flexDirection:"row",margin:0,padding:0,backgroundColor:"#ecf0f1"}},l.a.createElement(c.Left,{style:{margin:-10,padding:0}},l.a.createElement(c.Icon,{name:"newspaper-outline",style:{fontSize:48}}),l.a.createElement(c.Body,null,l.a.createElement(c.Text,{style:{fontWeight:"bold"}},a.title)))),l.a.createElement(c.CardItem,{header:!0},l.a.createElement(c.Right,{style:{alignItems:"flex-start",margin:-10,padding:0}},l.a.createElement(c.Text,{note:!0},"By: ",a.by),l.a.createElement(c.Text,{note:!0},"Rating: ",a.score),l.a.createElement(c.Text,{note:!0},p)),l.a.createElement(c.Right,{style:{justifyContent:"flex-start",margin:-10,padding:0}},l.a.createElement(c.Text,{note:!0},"Type: ",a.type),l.a.createElement(c.Text,{note:!0},v(a.time)," ago"),a.kids?l.a.createElement(c.Text,{note:!0,style:{color:"grey"}},"Total comments: ",a.kids.length):l.a.createElement(c.Text,{note:!0},"No comments yet"))),l.a.createElement(c.CardItem,{footer:!0,bordered:!0},l.a.createElement(c.Body,{style:{flexDirection:"row",justifyContent:"space-between",margin:-10,padding:0}},l.a.createElement(c.Button,{style:{margin:0,padding:0},info:!0,onPress:function(){return x.a.openURL(a.url)}},l.a.createElement(c.Text,null,"Open link")),l.a.createElement(c.Button,{disabled:!1,style:{margin:0,padding:0},warning:!0,onPress:function(){e.navigation.navigate("Comments",{story:a})}},l.a.createElement(c.Text,null,"Show more"))))):null}));function T(e){var t=e.navigation,n=e.route,a=Object(o.useState)(20),i=r()(a,2),m=i[0],f=i[1],d=Object(o.useState)([]),h=r()(d,2),p=h[0],y=h[1],E=l.a.useState(!1),g=r()(E,2),v=g[0],x=g[1],T=l.a.useCallback((function(){x(!0),b(n.params.type).then((function(e){y(e)})).then((function(){return x(!1)}))}),[]);return Object(o.useEffect)((function(){x(!0),b(n.params.type).then((function(e){y(e)})).then((function(){return x(!1)}));var e=setInterval((function(){x(!0),b(n.params.type).then((function(e){y(e)})).then((function(){return x(!1)}))}),6e4);return function(){return clearInterval(e)}}),[]),l.a.createElement(c.Content,{onScroll:function(e){(function(e){var t=e.layoutMeasurement,n=e.contentOffset,a=e.contentSize;return t.height+n.y+100>=a.height-20})(e.nativeEvent)&&(m<500?(x(!0),f(m+20),setInterval((function(){x(!1)}),1500)):f(500))},scrollEventThrottle:400,refreshControl:l.a.createElement(u.a,{refreshing:v,onRefresh:T})},p.slice(0,m).map((function(e){return l.a.createElement(s.a,{key:e,onPress:function(){}},l.a.createElement(k,{key:e,storyId:e,navigation:t}))})))}var C=n(17),w=n.n(C),I=n(81),S=n(275),j=n.n(S),O=n(170),B=n(11),P=Object(o.memo)((function e(t){var n=l.a.useState(!0),a=r()(n,2),i=a[0],s=a[1],u=Object(o.useState)({}),m=r()(u,2),f=m[0],d=m[1],h=l.a.useState(!1),p=r()(h,2),y=p[0],E=p[1];Object(o.useEffect)((function(){E(!0),g(t.commentId).then((function(e){return d(e)})).then((function(){return E(!1)}));var e=setInterval((function(){E(!0),g(t.commentId).then((function(e){return d(e)})).then((function(){return E(!1)}))}),3e4);return function(){return clearInterval(e)}}),[]);var b=new Date(1e3*f.time).toDateString();return f&&f.text?l.a.createElement(I.a.Section,{style:{borderBottomColor:"#E8E8E8",borderBottomWidth:2,backgroundColor:"#F5F5F5"}},l.a.createElement(I.a.Accordion,{expanded:i,onPress:function(){return s(!i)},style:{backgroundColor:"#E8E8E8"},title:l.a.createElement(c.Text,null,"Comment by: ",f.by),description:b+(y?" refreshing...":""),left:function(e){return l.a.createElement(I.a.Icon,w()({},e,{icon:"chat-processing-outline"}))}},l.a.createElement(I.a.Item,{left:"android"!==B.a.OS?function(){return l.a.createElement(c.Text,{style:{flexWrap:"wrap"}},l.a.createElement(j.a,{source:{html:f.text},contentWidth:Object(O.a)().width,style:{flexWrap:"wrap"}})," ")}:function(){return l.a.createElement(j.a,{source:{html:f.text},style:{flexWrap:"wrap"}})}}),l.a.createElement(I.a.Item,{left:function(){return l.a.createElement(c.Text,null," ",f.kids?l.a.createElement(c.Text,{style:{color:"blue"}},"Replies(",f.kids.length,")"):l.a.createElement(c.Text,{style:{color:"grey"}},"No replies yet"))},right:function(){return l.a.createElement(c.Text,null,v(f.time)," ago")}}),f.kids&&l.a.createElement(I.a.Item,{left:function(e){return l.a.createElement(I.a.Icon,w()({},e,{style:{margin:0,padding:0},icon:"share-all-outline"}))},style:{margin:0,padding:0,justifyContent:"center",alignContent:"center"},titleStyle:{margin:0,padding:0,height:0},description:function(){return l.a.createElement(I.a.Accordion,{style:{margin:-6,padding:0},title:"toggle replies",titleStyle:{margin:0,padding:0},descriptionStyle:{margin:0,padding:0,backgroundColor:"purple"}},f.kids&&f.kids.map((function(t){return l.a.createElement(e,{key:t,commentId:t})})))}}))):null})),R=n(51);function D(e){var t=e.route,n=e.navigation,a=t.params,i=Object(o.useState)({}),s=r()(i,2),m=s[0],d=s[1],p=Object(o.useState)(5),y=r()(p,2),E=y[0],b=y[1],v=Object(o.useState)({}),k=r()(v,2),T=k[0],C=k[1],w=l.a.useState(!1),I=r()(w,2),S=I[0],j=I[1],O=l.a.useCallback((function(){j(!0),g(a.story.id).then((function(e){return e.kids&&C(e.kids)})).then((function(){return j(!1)}))}),[]);Object(o.useEffect)((function(){return j(!0),function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(h.a.get("https://api.microlink.io/?url="+e+"&audio=false&iframe=false&palette=false&screenshot=false&video=falses").catch((function(e){return console.log(e)})).then((function(e){return e.data})));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),null,null,null,Promise)}(a.story.url).catch((function(e){return console.log("datacatch",e),d({status:"The description is unavailable because the limit of requests is exceeded :("}),{status:"The description is unavailable because the limit of requests is exceeded :("}})).then((function(e){d(e)})).then((function(){return j(!1)})),function(){d({})}}),[]),Object(o.useEffect)((function(){C(a.story.kids),j(!0),g(a.story.id).then((function(e){return e.kids&&C(e.kids)})).then((function(){return j(!1)}));var e=setInterval((function(){j(!0),g(a.story.id).then((function(e){return e.kids&&C(e.kids)})).then((function(){return j(!1)}))}),15e3);return function(){return clearInterval(e)}}),[]);var B=new Date(1e3*a.story.time).toDateString();return l.a.createElement(c.Container,null,l.a.createElement(c.Content,{onScroll:function(e){(function(e){var t=e.layoutMeasurement,n=e.contentOffset,a=e.contentSize;return t.height+n.y+100>=a.height-20})(e.nativeEvent)&&a.story.kids&&(E<a.story.kids.length?b(E+5):b(a.story.kids.length))},scrollEventThrottle:400,refreshControl:l.a.createElement(u.a,{refreshing:S,onRefresh:O})},l.a.createElement(c.Card,null,l.a.createElement(c.CardItem,null,l.a.createElement(c.Left,null,l.a.createElement(c.Icon,{name:"newspaper-outline"}),l.a.createElement(c.Body,null,l.a.createElement(c.Text,{style:{fontWeight:"bold"}},a.story.title),l.a.createElement(c.Text,{note:!0},B)))),"The description is unavailable because the limit of requests is exceeded :("!==m.status&&m.data&&l.a.createElement(c.CardItem,null,l.a.createElement(c.Text,{style:{textAlign:"center",fontWeight:"bold",textTransform:"uppercase"}},m.data.title)),l.a.createElement(c.CardItem,{cardBody:!0},"The description is unavailable because the limit of requests is exceeded :("!==m.status&&m.data&&m.data.image&&l.a.createElement(R.a,{source:{uri:m.data.image.url},style:{height:200,width:200,flex:1,resizeMode:"cover"}}),!m.data&&"The description is unavailable because the limit of requests is exceeded :("!==m.status&&l.a.createElement(c.Body,{style:{justifyContent:"center",textAlign:"center",alignItems:"center",alignContent:"center"}},l.a.createElement(c.Spinner,{color:"blue"}))),l.a.createElement(c.CardItem,{bordered:!0,style:{justifyContent:"center",alignItems:"center"}},l.a.createElement(c.Body,null,m.data&&l.a.createElement(c.Text,null,m.data.description," "),"The description is unavailable because the limit of requests is exceeded :("===m.status&&l.a.createElement(c.Text,null,m.status),a.story.kids?l.a.createElement(c.Text,{style:{color:"grey"}},"Total comments: ",a.story.kids.length):l.a.createElement(c.Text,{style:{color:"grey"}},"No comments yet"))),l.a.createElement(c.CardItem,{footer:!0,bordered:!0,style:{justifyContent:"space-between"}},l.a.createElement(c.Body,{style:{flexDirection:"row",justifyContent:"space-between",margin:-10,padding:0}},l.a.createElement(c.Button,{style:{margin:0,padding:0},onPress:function(){return x.a.openURL(a.story.url)}},l.a.createElement(c.Text,null,"Open link")),l.a.createElement(c.Button,{style:{margin:0,padding:0},danger:!0,onPress:function(){n.pop()}},l.a.createElement(c.Text,null,"Back to news page"))))),T&&T.length>0&&T.slice(0,E).map((function(e){return l.a.createElement(P,{key:e,commentId:e})}))))}var M=n(385),W=n(728),q=n(727),N=Object(W.a)(),A=Object(q.a)();function z(e){return l.a.createElement(N.Navigator,null,l.a.createElement(N.Screen,{options:{header:function(){return null}},name:"Stories",component:T,initialParams:{type:e.route.params.type}}),l.a.createElement(N.Screen,{name:"Comments",component:D,options:{header:function(){return null}}}))}function L(){var e=Object(i.a)({Helvetica:n(382),Roboto:n(382),Roboto_medium:n(713)});return r()(e,1)[0]?l.a.createElement(M.a,null,l.a.createElement(c.Container,null,l.a.createElement(c.Header,{style:{backgroundColor:"#003133"}},l.a.createElement(c.Body,null,l.a.createElement(c.Title,{style:{alignSelf:"center",margin:10,color:"white"}},"Real hacker news"))),l.a.createElement(A.Navigator,null,l.a.createElement(A.Screen,{testProps:"123",initialParams:{type:"n"},name:"New",component:z}),l.a.createElement(A.Screen,{testProps:"456",initialParams:{type:"t"},name:"Top",component:z}),l.a.createElement(A.Screen,{testProps:"789",initialParams:{type:"b"},name:"Best",component:z})))):null}},483:function(e,t,n){e.exports=n(718)}},[[483,1,2]]]);
//# sourceMappingURL=app.24caa6e9.chunk.js.map